<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>MetricStream</title>
  <meta name="description" content="MetricStream EGRCP Application.">
  <meta name="author" content="MetricStream Inc.">

  <meta name="viewport" content="width=device-width">
  <!-- Using less.js for our {less} CSS compilation.
  <link rel="stylesheet/less" href="less/style.less">
  <script src="js/libs/less-1.3.0.min.js"></script>
  -->

  <link rel="stylesheet" href="css/style.css">

  <script src="js/lib/modernizr/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<!-- FIXME HACK Force webkit browsers to clear cache. See http://stackoverflow.com/a/6203011/585614 -->
<body onunload="">
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

  <div id="page-audits" data-role="page" data-theme="a" data-bind="with: $root.taskViewModel">
    <header data-role="header" data-position="fixed">
      <h1><img src="img/metricstream/metricstream-logo.png" /></h1>
      <a href="#page-settings" data-icon="gear" class="ui-btn-right">Settings</a>
    </header>

    <div class="container-fluid page" data-role="content">
      <!-- Wrapper container for sidebar and main content area. -->
      <div class="row-fluid">
        <!-- Side bar -->
        <div class="span4">
          <div class="iscroll-panel task-list-panel" data-iscroll="" data-bind="iscroll: true">

            <!-- Pull to refresh containers -->
            <div class="iscroll-pulldown">
              <span class="iscroll-pull-icon">
              </span><span class="iscroll-pull-label"></span>
            </div>
            <!-- /Pull to refresh containers -->

            <!-- TODO Verify if removing ", afterRender: refreshListItemsUI" from data-bind attribute will cause any problems. -->
            <ul id="task-list" data-role="listview" class="nav nav-list" data-inset="true" data-bind="template: { name: 'template-tasks-list' }">
            </ul>

            <!-- FIXME Workaround for iscroll bottom padding issues. -->
            <div class="vertical-spacer"></div>
          </div>
        </div>
        <!-- /Side bar -->
        <div class="span8">
          <!-- ko ifnot: selectedTask -->
          <div class="no-task-selected"><i class="icon-tasks"></i> Select a task to view its details.</div>
          <!-- /ko -->

          <!-- ko if: selectedTask -->
          <div class="iscroll-panel task-details-panel" data-iscroll="" data-bind="iscroll: true">
            <form id="task-details" action="" class="form-text form-horizontal" data-bind="template: { name: 'template-task-detail', data: selectedTask, afterRender: refreshCollapsibleBlocks }">
            </form>

            <!-- FIXME Workaround for iscroll bottom padding issues. -->
            <div class="vertical-spacer"></div>
          </div>
          <!-- /ko -->
        </div>
      </div>
    </div>

    <footer data-role="footer" data-position="fixed"></footer>
  </div>

  <div id="page-settings" data-role="page" data-theme="a" data-bind="with: $root.settingsViewModel">
  </div>

  <!-- External templates -->
  <script type="text/html" id="template-tasks-list">
  </script>

  <script type="text/html" id="template-task-detail">
  </script>
  <!-- /External templates -->

  <!-- scripts concatenated and minified via ant build script-->
  <script src="js/lib/requirejs/require.js" data-main="js/script"></script>
  <!-- end scripts-->

</body>
</html>